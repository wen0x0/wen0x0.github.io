<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light dark">
  



<meta name="description" content="Tìm hiểu chi tiết về cách máy tính tổ chức và quản lý bộ nhớ, từ phần cứng đến cách chương trình sử dụng các vùng nhớ khác nhau trong quá trình thực thi.">

  <title>Một hành trình qua các vùng nhớ của máy tính và chương trình</title>
  <link rel="icon" type="image/png" sizes="32x32" href="https://wen.is-a.dev/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://wen.is-a.dev/img/favicon-16x16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://wen.is-a.dev/img/apple-touch-icon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&family=Ancizar+Sans:ital,wght@0,100..1000;1,100..1000&family=Bitter:ital,wght@0,100..900;1,100..900&family=Indie+Flower&family=Lora:ital,wght@0,400..700;1,400..700&family=Marcellus&display=swap"
    rel="stylesheet">
  
  <style>
  /* light mode colors */
  body {
    /* --primary-color: #5871a2; */
    --primary-color: #5c4323;
    --primary-pale-color: #5871a233;
    --primary-decoration-color: #5871a210;
    --bg-color: #f0f9ff;
    /* --text-color: #2f3030; */
    --text-color: #000000;
    /* --text-pale-color: #767676; */
    --text-pale-color: #000000;
    --text-decoration-color: #a9a9a9;
    --highlight-mark-color: #5f75b020;

    --callout-note-color: #5871a2;
    --callout-tip-color: #268556;
    --callout-important-color: #885fc9;
    --callout-warning-color: #ab6632;
    --callout-caution-color: #c64e4e;
  }

  /* dark mode colors */
  body.dark {
    /* --primary-color: #6f8fd1; */
    --primary-color: #deff7b;
    --primary-pale-color: #6f8fd166;
    --primary-decoration-color: #6f8fd112;
    /* --bg-color: #1c1c1c; */
    /* --bg-color: #002727; */
    --bg-color: #00212e;
    /* --text-color: #c1c1c1; */
    --text-color: #ffffff;
    /* --text-pale-color: #848484; */
    --text-pale-color: #ffffff;
    --text-decoration-color: #5f5f5f;
    --highlight-mark-color: #8296cb3b;

    --callout-note-color: #6f8fd1;
    --callout-tip-color: #47976f;
    --callout-important-color: #9776cd;
    --callout-warning-color: #ad7a52;
    --callout-caution-color: #d06161;
  }

  /* typography */
  body {
    /* --main-font: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'; */
    --main-font: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --heading-font: 'Lora', 'Bitter', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    --code-font: 'Cascadia Code', 'Fira Code', 'Courier New', monospace, ui-monospace, SFMono-Regular, Menlo, Monaco, 'Liberation Mono';
    --homepage-max-width: 768px;
    --main-max-width: 768px;
    --avatar-size: 75px;
    --font-size: 16px;
    --line-height: 1.75;
    --img-border-radius: 0px;
    --detail-border-radius: 11px;
    --dark-mode-img-brightness: 0.75;
    --dark-mode-chart-brightness: 0.75;
    --inline-code-border-radius: 2px;
    --inline-code-bg-color: var(--primary-decoration-color);
    --block-code-border-radius: 0px;
    --block-code-border-color: var(--primary-color);
    --detail-border-color: var(--primary-color);
  }

  #name,
  #id,
  #bio,
  #left,
  a.post,
  a.back-link,
  a.tag,
  a.category,
  .title {
    font-family: var(--heading-font);
  }

  span.date {
    font-family: var(--code-font);
    color: var(--text-pale-color);
  }

  .gif-wrapper {
    text-align: center;
    margin: 1.5rem 0;
  }

  .gif-wrapper .intro-gif {
    max-width: 96%;
    height: auto;
    border-radius: 8px;
  }

  .verified-icon {
    display: inline-flex;
    align-items: center;
    margin-bottom: 3px;
    vertical-align: middle;
  }

  .verified-icon svg {
    width: 16px;
    height: 16px;
  }

  .top-nav {
    width: 100%;
    padding-bottom: 1em;
    border-bottom: 1px solid var(--border-color);
    background: rgba(var(--background-rgb), 0.85);
    backdrop-filter: blur(8px);
    border-radius: var(--detail-border-radius);
    position: sticky;
    top: 0;
    z-index: 1000;
  }

  .top-nav nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 40px;
  }

  .nav-left,
  .nav-center,
  .nav-right {
    display: flex;
    align-items: center;
  }

  .nav-center {
    flex: 1;
    justify-content: center;
  }

  .avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    margin-top: 1em;
  }

  .menu-wrapper {
    position: relative;
    margin-top: 1.5em;
  }

  .menu-trigger {
    font-size: 1.5em;
    background: transparent;
    border: none;
    cursor: pointer;
    color: var(--text-color);
  }

  .menu-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    display: flex;
    flex-direction: column;

    background: var(--bg-color);
    font-family: var(--heading-font);
    border: 1px solid var(--primary-pale-color);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    border-radius: 8px;
    min-width: 85px;
    padding: 0.25em 0;
    z-index: 2000;

    opacity: 0;
    transform: translateY(-10px);
    pointer-events: none;
    transition: opacity 0.25s ease, transform 0.25s ease;
  }

  .menu-wrapper.active .menu-dropdown {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }


  .menu-dropdown a {
    display: block;
    padding: 0.6em 1em;
    text-decoration: none;
    color: var(--text-color);
    font-size: 0.95em;
    margin: auto;
    transition: background 0.2s ease, color 0.2s ease;
  }

  #theme-toggle:hover,
  #rain-toggle:hover {
    cursor: pointer;
  }

  .foot-quote,
  .section-title {
    font-family: 'Lora', serif;
    font-style: italic;
    text-align: center;
    display: block;
    margin-top: 2em;
  }

  .layout-list .post {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1em;
  }

  .post>span:first-child {
    flex: 1;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 0;
  }

  .post>.date {
    flex-shrink: 0;
    white-space: nowrap;
  }

  .year-heading {
    margin-top: 1.5em;
    margin-bottom: 0.5em;
    font-size: 1.5em;
    font-weight: bold;
    font-family: var(--heading-font);
  }

</style>
  <link rel="stylesheet" href="https://wen.is-a.dev/main.css">
  

<link id="hl" rel="stylesheet" type="text/css" href="/hl-light.css" />



  
</head>

<body class="post">

  
  <script>
    const theme = sessionStorage.getItem('theme');
    const match = window.matchMedia("(prefers-color-scheme: dark)").matches;
    if ((theme && theme === 'dark') || (!theme && match)) {
      document.body.classList.add('dark');
      const hl = document.querySelector('link#hl');
      if (hl) hl.href = 'https://wen.is-a.dev/hl-dark.css';
    }
  </script>
  

  
<div id="wrapper">
  <div id="blank"></div>
  <aside>
    
    
    <nav>
      <ul>
        
        <li>
          <a class="h2" href="#gioi-thieu">Giới thiệu</a>
          
        </li>
        
        <li>
          <a class="h2" href="#phan-cap-bo-nho-cua-may-tinh">Phân cấp bộ nhớ của máy tính</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#registers-thanh-ghi">Registers (Thanh ghi)</a>
            </li>
            
            <li>
              <a class="h3" href="#cache-memory">Cache Memory</a>
            </li>
            
            <li>
              <a class="h3" href="#ram-random-access-memory">RAM (Random Access Memory)</a>
            </li>
            
            <li>
              <a class="h3" href="#storage-bo-nho-ngoai">Storage (Bộ nhớ ngoài)</a>
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a class="h2" href="#cac-vung-nho-cua-chuong-trinh">Các vùng nhớ của chương trình</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#text-segment-code-segment">Text Segment (Code Segment)</a>
            </li>
            
            <li>
              <a class="h3" href="#data-segment">Data Segment</a>
            </li>
            
            <li>
              <a class="h3" href="#heap">Heap</a>
            </li>
            
            <li>
              <a class="h3" href="#stack">Stack</a>
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a class="h2" href="#memory-mapping-va-virtual-memory">Memory Mapping và Virtual Memory</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#virtual-memory">Virtual Memory</a>
            </li>
            
            <li>
              <a class="h3" href="#page-table-va-paging">Page Table và Paging</a>
            </li>
            
            <li>
              <a class="h3" href="#memory-mapped-files">Memory-Mapped Files</a>
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a class="h2" href="#quan-ly-bo-nho-va-toi-uu-hoa">Quản lý bộ nhớ và tối ưu hóa</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#memory-allocation-strategies">Memory Allocation Strategies</a>
            </li>
            
            <li>
              <a class="h3" href="#memory-fragmentation">Memory Fragmentation</a>
            </li>
            
            <li>
              <a class="h3" href="#cache-optimization">Cache Optimization</a>
            </li>
            
            <li>
              <a class="h3" href="#memory-leaks-va-tools">Memory Leaks và Tools</a>
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a class="h2" href="#bao-mat-bo-nho">Bảo mật bộ nhớ</a>
          
          <ul>
            
            <li>
              <a class="h3" href="#buffer-overflow">Buffer Overflow</a>
            </li>
            
            <li>
              <a class="h3" href="#use-after-free">Use-After-Free</a>
            </li>
            
            <li>
              <a class="h3" href="#memory-protection">Memory Protection</a>
            </li>
            
          </ul>
          
        </li>
        
        <li>
          <a class="h2" href="#ket-luan">Kết luận</a>
          
        </li>
        
      </ul>
    </nav>
    
    
    <button id="back-to-top" aria-label="back to top">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-up"><line x1="12" y1="19" x2="12" y2="5"></line><polyline points="5 12 12 5 19 12"></polyline></svg>

    </button>
    
  </aside>
  <main>
    
<header class="top-nav">
  <nav>
    <!-- Left: Back -->
    <div class="nav-left">
      <a href="https:&#x2F;&#x2F;wen.is-a.dev&#x2F;notes" class="back-link">← Back</a>
    </div>

    <!-- Center: Avatar -->
    <div class="nav-center">
      
      <a href="/">
        <img src="https://wen.is-a.dev/img/righright.png" alt="avatar" class="avatar">
      </a>
      
    </div>

    <!-- Right: Menu dropdown -->
    <div class="nav-right">

      <div class="menu-wrapper">

        <button class="menu-trigger" aria-label="menu">
          &#9776;
        </button>
        <div class="menu-dropdown">
          <a href="https://wen.is-a.dev/notes">Notes</a>
          <a href="https://wen.is-a.dev/tags">Tags</a>
          <a href="https://wen.is-a.dev/about">About</a>
          
          
          
          
          

          <a id="theme-toggle" aria-label="theme switch">
            <span class="moon-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill="currentColor"></path></svg>
</span>
            <span class="sun-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill="currentColor"></path></svg>
</span>
          </a>

          
        </div>
      </div>
    </div>
  </nav>
</header>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const trigger = document.querySelector(".menu-trigger");
    const wrapper = document.querySelector(".menu-wrapper");

    if (trigger && wrapper) {
      trigger.addEventListener("click", () => {
        wrapper.classList.toggle("active");
      });

      document.addEventListener("click", (e) => {
        if (!wrapper.contains(e.target)) {
          wrapper.classList.remove("active");
        }
      });
    }
  });

</script>


    <div>
      
      
      
      
      <div id="copy-cfg" style="display: none;" data-copy-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M6.9998 6V3C6.9998 2.44772 7.44752 2 7.9998 2H19.9998C20.5521 2 20.9998 2.44772 20.9998 3V17C20.9998 17.5523 20.5521 18 19.9998 18H16.9998V20.9991C16.9998 21.5519 16.5499 22 15.993 22H4.00666C3.45059 22 3 21.5554 3 20.9991L3.0026 7.00087C3.0027 6.44811 3.45264 6 4.00942 6H6.9998ZM5.00242 8L5.00019 20H14.9998V8H5.00242ZM8.9998 6H16.9998V16H18.9998V4H8.9998V6Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
" data-check-icon="&lt;svg xmlns=&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2000&#x2F;svg&quot; viewBox=&quot;0 0 24 24&quot; width=&quot;18&quot; height=&quot;18&quot;&gt;&lt;path d=&quot;M10.0007 15.1709L19.1931 5.97852L20.6073 7.39273L10.0007 17.9993L3.63672 11.6354L5.05093 10.2212L10.0007 15.1709Z&quot; fill=&quot;currentColor&quot;&gt;&lt;&#x2F;path&gt;&lt;&#x2F;svg&gt;
">
      </div>
      
      <article class="prose">
        <h1 class="title">Một hành trình qua các vùng nhớ của máy tính và chương trình</h1>
        <div id="post-info">
          <div id="date">
            <span id="publish">Sep 10, 2025</span>
            </div>

          
          <div id="tags">
            <a class="instant" href="https://wen.is-a.dev/tags/computer-science"><span>#</span>computer science</a><a class="instant" href="https://wen.is-a.dev/tags/memory-management"><span>#</span>memory management</a><a class="instant" href="https://wen.is-a.dev/tags/programming"><span>#</span>programming</a><a class="instant" href="https://wen.is-a.dev/tags/system-architecture"><span>#</span>system architecture</a>
          </div>
          
        </div>

        
        

        

        <h2 id="gioi-thieu">Giới thiệu<a class="zola-anchor" href="#gioi-thieu" aria-label="Anchor link for: gioi-thieu" style="visibility: hidden;"></a></h2>
<p>Bộ nhớ là một trong những thành phần cốt lõi của hệ thống máy tính, đóng vai trò lưu trữ dữ liệu và lệnh để CPU có thể xử lý. Hiểu rõ về cách tổ chức và quản lý bộ nhớ không chỉ giúp lập trình viên viết code hiệu quả hơn mà còn giúp debug và tối ưu hóa ứng dụng tốt hơn. Bài viết này sẽ đi sâu vào các vùng nhớ từ góc độ phần cứng và phần mềm.</p>
<h2 id="phan-cap-bo-nho-cua-may-tinh">Phân cấp bộ nhớ của máy tính<a class="zola-anchor" href="#phan-cap-bo-nho-cua-may-tinh" aria-label="Anchor link for: phan-cap-bo-nho-cua-may-tinh" style="visibility: hidden;"></a></h2>
<h3 id="registers-thanh-ghi">Registers (Thanh ghi)<a class="zola-anchor" href="#registers-thanh-ghi" aria-label="Anchor link for: registers-thanh-ghi" style="visibility: hidden;"></a></h3>
<p>Registers là loại bộ nhớ nhanh nhất và nằm trực tiếp trong CPU. Chúng có dung lượng rất nhỏ, thường chỉ vài byte đến vài chục byte, nhưng tốc độ truy cập gần như tức thời. Registers lưu trữ các dữ liệu đang được xử lý ngay lập tức bởi CPU, như giá trị các biến đang tính toán, địa chỉ bộ nhớ, hoặc trạng thái của chương trình.</p>
<p>Các loại registers phổ biến bao gồm thanh ghi dữ liệu (data registers), thanh ghi địa chỉ (address registers), thanh ghi đa năng (general-purpose registers), và các thanh ghi đặc biệt như Program Counter (PC) để theo dõi lệnh tiếp theo sẽ thực thi.</p>
<h3 id="cache-memory">Cache Memory<a class="zola-anchor" href="#cache-memory" aria-label="Anchor link for: cache-memory" style="visibility: hidden;"></a></h3>
<p>Cache là lớp bộ nhớ trung gian nằm giữa registers và RAM, được thiết kế để giảm thời gian CPU phải chờ dữ liệu từ RAM. Cache thường được chia thành ba cấp: L1, L2, và L3.</p>
<p>L1 cache là nhanh nhất và nhỏ nhất, thường chỉ vài chục KB, nằm ngay trong từng CPU core. L2 cache lớn hơn, khoảng vài trăm KB đến vài MB, và có thể được chia sẻ giữa các cores hoặc độc lập cho từng core. L3 cache là lớn nhất, có thể lên đến hàng chục MB, được chia sẻ giữa tất cả các cores trong CPU.</p>
<p>Cache hoạt động theo nguyên lý locality: dữ liệu được truy cập gần đây có khả năng cao sẽ được truy cập lại (temporal locality), và dữ liệu gần với địa chỉ vừa truy cập cũng có khả năng cao sẽ được truy cập (spatial locality).</p>
<h3 id="ram-random-access-memory">RAM (Random Access Memory)<a class="zola-anchor" href="#ram-random-access-memory" aria-label="Anchor link for: ram-random-access-memory" style="visibility: hidden;"></a></h3>
<p>RAM là bộ nhớ chính của máy tính, nơi lưu trữ dữ liệu và chương trình đang chạy. RAM có dung lượng lớn hơn nhiều so với cache, thường từ vài GB đến hàng trăm GB trong các hệ thống hiện đại. Tuy nhiên, tốc độ truy cập RAM chậm hơn cache đáng kể.</p>
<p>RAM là bộ nhớ volatile, nghĩa là dữ liệu sẽ bị mất khi tắt nguồn điện. Khi một chương trình chạy, nó được load từ ổ cứng vào RAM, và mọi thao tác xử lý dữ liệu diễn ra trong RAM trước khi kết quả được ghi lại vào ổ cứng nếu cần.</p>
<h3 id="storage-bo-nho-ngoai">Storage (Bộ nhớ ngoài)<a class="zola-anchor" href="#storage-bo-nho-ngoai" aria-label="Anchor link for: storage-bo-nho-ngoai" style="visibility: hidden;"></a></h3>
<p>Storage bao gồm các thiết bị lưu trữ lâu dài như HDD, SSD, hoặc các thiết bị lưu trữ khác. Đây là nơi lưu trữ dữ liệu vĩnh viễn, không bị mất khi tắt máy. Storage có dung lượng rất lớn, từ hàng trăm GB đến nhiều TB, nhưng tốc độ truy cập chậm nhất trong các loại bộ nhớ.</p>
<p>Xu hướng hiện nay là sử dụng SSD thay thế HDD vì tốc độ đọc ghi nhanh hơn nhiều, mặc dù giá thành cao hơn trên mỗi GB lưu trữ.</p>
<h2 id="cac-vung-nho-cua-chuong-trinh">Các vùng nhớ của chương trình<a class="zola-anchor" href="#cac-vung-nho-cua-chuong-trinh" aria-label="Anchor link for: cac-vung-nho-cua-chuong-trinh" style="visibility: hidden;"></a></h2>
<p>Khi một chương trình được thực thi, hệ điều hành sẽ cấp phát một không gian địa chỉ ảo cho chương trình đó. Không gian này được chia thành nhiều vùng nhớ khác nhau, mỗi vùng có vai trò và đặc điểm riêng.</p>
<h3 id="text-segment-code-segment">Text Segment (Code Segment)<a class="zola-anchor" href="#text-segment-code-segment" aria-label="Anchor link for: text-segment-code-segment" style="visibility: hidden;"></a></h3>
<p>Text segment là vùng nhớ chứa mã máy của chương trình, tức là các lệnh đã được biên dịch sẵn. Vùng này thường được đánh dấu là read-only để tránh chương trình tự sửa đổi code của mình trong quá trình chạy, giúp tăng tính bảo mật và ổn định.</p>
<p>Text segment thường được đặt ở địa chỉ thấp của không gian bộ nhớ và có kích thước cố định sau khi chương trình được load. Nhiều process chạy cùng một chương trình có thể chia sẻ chung một text segment để tiết kiệm bộ nhớ.</p>
<h3 id="data-segment">Data Segment<a class="zola-anchor" href="#data-segment" aria-label="Anchor link for: data-segment" style="visibility: hidden;"></a></h3>
<p>Data segment chia thành hai phần chính: initialized data segment và uninitialized data segment (BSS).</p>
<p>Initialized data segment chứa các biến toàn cục và biến static đã được khởi tạo giá trị trong code. Ví dụ, nếu bạn khai báo <code>int global_var = 100;</code> thì biến này sẽ được lưu trong initialized data segment.</p>
<p>BSS (Block Started by Symbol) chứa các biến toàn cục và biến static chưa được khởi tạo hoặc được khởi tạo bằng 0. Các biến này không chiếm dung lượng trong file thực thi, chỉ ghi nhận kích thước cần thiết, và được khởi tạo bằng 0 khi chương trình load vào bộ nhớ.</p>
<h3 id="heap">Heap<a class="zola-anchor" href="#heap" aria-label="Anchor link for: heap" style="visibility: hidden;"></a></h3>
<p>Heap là vùng nhớ dùng cho cấp phát động (dynamic memory allocation) trong thời gian chạy. Khi bạn sử dụng các hàm như <code>malloc()</code>, <code>calloc()</code>, <code>new</code> trong C/C++, hoặc các cơ chế tương tự trong các ngôn ngữ khác, bộ nhớ được cấp phát từ heap.</p>
<p>Heap phát triển từ địa chỉ thấp lên địa chỉ cao trong không gian bộ nhớ. Lập trình viên có trách nhiệm quản lý bộ nhớ heap, bao gồm cả việc giải phóng bộ nhớ khi không còn sử dụng. Nếu không giải phóng đúng cách, sẽ dẫn đến memory leak, làm giảm bộ nhớ khả dụng và có thể gây crash chương trình.</p>
<p>Quản lý heap phức tạp hơn stack vì bộ nhớ có thể được cấp phát và giải phóng theo bất kỳ thứ tự nào, dẫn đến fragmentation. Các ngôn ngữ hiện đại như Java, Python, hoặc Go có garbage collector tự động quản lý heap, giảm gánh nặng cho lập trình viên.</p>
<h3 id="stack">Stack<a class="zola-anchor" href="#stack" aria-label="Anchor link for: stack" style="visibility: hidden;"></a></h3>
<p>Stack là vùng nhớ được sử dụng cho các biến cục bộ, tham số hàm, địa chỉ trả về, và các thông tin cần thiết để quản lý việc gọi hàm. Stack hoạt động theo cơ chế LIFO (Last In First Out).</p>
<p>Mỗi khi một hàm được gọi, một stack frame mới được tạo ra chứa các biến cục bộ của hàm đó, các tham số được truyền vào, và địa chỉ trả về để CPU biết phải quay lại đâu sau khi hàm kết thúc. Khi hàm kết thúc, stack frame đó được giải phóng tự động.</p>
<p>Stack phát triển từ địa chỉ cao xuống địa chỉ thấp, ngược hướng với heap. Kích thước stack thường bị giới hạn (ví dụ 1-8 MB tùy hệ điều hành), và nếu sử dụng quá nhiều bộ nhớ stack, sẽ xảy ra stack overflow. Điều này thường xảy ra khi đệ quy quá sâu hoặc khai báo mảng cục bộ quá lớn.</p>
<p>Truy cập stack rất nhanh vì nó hoạt động tuần tự và CPU có thể dự đoán được pattern truy cập. Quản lý stack cũng đơn giản hơn heap vì việc cấp phát và giải phóng diễn ra tự động theo luồng thực thi của chương trình.</p>
<h2 id="memory-mapping-va-virtual-memory">Memory Mapping và Virtual Memory<a class="zola-anchor" href="#memory-mapping-va-virtual-memory" aria-label="Anchor link for: memory-mapping-va-virtual-memory" style="visibility: hidden;"></a></h2>
<h3 id="virtual-memory">Virtual Memory<a class="zola-anchor" href="#virtual-memory" aria-label="Anchor link for: virtual-memory" style="visibility: hidden;"></a></h3>
<p>Virtual memory là kỹ thuật cho phép mỗi process có một không gian địa chỉ ảo riêng, độc lập với bộ nhớ vật lý thực tế. Điều này mang lại nhiều lợi ích quan trọng.</p>
<p>Thứ nhất, virtual memory cho phép các process chạy mà không cần quan tâm đến vị trí vật lý của dữ liệu trong RAM. Mỗi process nghĩ rằng nó có toàn bộ không gian địa chỉ cho riêng mình, thường là từ 0 đến giá trị tối đa (ví dụ 2^64 trên hệ thống 64-bit).</p>
<p>Thứ hai, virtual memory tăng cường bảo mật và cô lập giữa các process. Mỗi process không thể truy cập trực tiếp vào bộ nhớ của process khác, ngăn chặn các lỗi hoặc tấn công từ một chương trình ảnh hưởng đến chương trình khác.</p>
<p>Thứ ba, virtual memory cho phép sử dụng swap space (trên ổ cứng) để mở rộng bộ nhớ khả dụng vượt quá RAM vật lý. Khi RAM đầy, các trang bộ nhớ ít được sử dụng có thể được chuyển ra swap space, và được load lại khi cần.</p>
<h3 id="page-table-va-paging">Page Table và Paging<a class="zola-anchor" href="#page-table-va-paging" aria-label="Anchor link for: page-table-va-paging" style="visibility: hidden;"></a></h3>
<p>Để ánh xạ địa chỉ ảo sang địa chỉ vật lý, hệ điều hành sử dụng page table. Bộ nhớ được chia thành các page (thường 4KB), và mỗi page ảo được ánh xạ tới một page frame trong bộ nhớ vật lý hoặc trên đĩa.</p>
<p>Khi CPU truy cập một địa chỉ ảo, Memory Management Unit (MMU) sẽ tra cứu page table để tìm địa chỉ vật lý tương ứng. Nếu page đó không có trong RAM (page fault), hệ điều hành sẽ load nó từ đĩa vào RAM.</p>
<p>Page table được lưu trong RAM nhưng có cache riêng gọi là Translation Lookaside Buffer (TLB) để tăng tốc độ tra cứu. TLB lưu các ánh xạ gần đây nhất, giúp giảm thời gian truy cập bộ nhớ.</p>
<h3 id="memory-mapped-files">Memory-Mapped Files<a class="zola-anchor" href="#memory-mapped-files" aria-label="Anchor link for: memory-mapped-files" style="visibility: hidden;"></a></h3>
<p>Memory-mapped files là kỹ thuật ánh xạ một file trên đĩa vào không gian địa chỉ của process. Thay vì đọc file bằng system calls như <code>read()</code> hoặc <code>write()</code>, chương trình có thể truy cập file như truy cập bộ nhớ thông thường.</p>
<p>Kỹ thuật này rất hiệu quả cho các thao tác trên file lớn vì hệ điều hành chỉ load các phần cần thiết của file vào bộ nhớ. Nhiều process cũng có thể chia sẻ cùng một memory-mapped file, tiết kiệm bộ nhớ và cho phép giao tiếp giữa các process.</p>
<h2 id="quan-ly-bo-nho-va-toi-uu-hoa">Quản lý bộ nhớ và tối ưu hóa<a class="zola-anchor" href="#quan-ly-bo-nho-va-toi-uu-hoa" aria-label="Anchor link for: quan-ly-bo-nho-va-toi-uu-hoa" style="visibility: hidden;"></a></h2>
<h3 id="memory-allocation-strategies">Memory Allocation Strategies<a class="zola-anchor" href="#memory-allocation-strategies" aria-label="Anchor link for: memory-allocation-strategies" style="visibility: hidden;"></a></h3>
<p>Có nhiều chiến lược cấp phát bộ nhớ khác nhau, mỗi cái phù hợp với tình huống khác nhau. First Fit cấp phát block bộ nhớ trống đầu tiên đủ lớn, nhanh nhưng có thể gây fragmentation. Best Fit tìm block nhỏ nhất đủ lớn, giảm lãng phí nhưng chậm hơn. Worst Fit chọn block lớn nhất, hy vọng phần còn lại sau khi cấp phát vẫn đủ lớn để sử dụng cho các yêu cầu khác.</p>
<p>Trong thực tế, các memory allocator hiện đại như ptmalloc (trong glibc), jemalloc, hoặc tcmalloc sử dụng các kỹ thuật phức tạp hơn, kết hợp nhiều chiến lược và tối ưu cho multithreading.</p>
<h3 id="memory-fragmentation">Memory Fragmentation<a class="zola-anchor" href="#memory-fragmentation" aria-label="Anchor link for: memory-fragmentation" style="visibility: hidden;"></a></h3>
<p>Fragmentation là vấn đề xảy ra khi bộ nhớ bị chia nhỏ thành nhiều mảnh không liên tục. Internal fragmentation xảy ra khi block bộ nhớ được cấp phát lớn hơn kích thước yêu cầu, phần thừa bị lãng phí. External fragmentation xảy ra khi có đủ tổng bộ nhớ trống nhưng không có block liên tục nào đủ lớn cho yêu cầu cấp phát.</p>
<p>Để giảm fragmentation, có thể sử dụng memory compaction (di chuyển các block để tạo không gian liên tục lớn hơn), sử dụng buddy system, hoặc cấp phát theo size classes.</p>
<h3 id="cache-optimization">Cache Optimization<a class="zola-anchor" href="#cache-optimization" aria-label="Anchor link for: cache-optimization" style="visibility: hidden;"></a></h3>
<p>Tối ưu hóa việc sử dụng cache là chìa khóa để cải thiện hiệu suất. Các kỹ thuật bao gồm: tổ chức dữ liệu để tăng spatial locality (đặt dữ liệu liên quan gần nhau), tăng temporal locality (tái sử dụng dữ liệu trong cache), cache blocking (chia thuật toán thành các khối nhỏ vừa với cache), và tránh false sharing trong multithreading (các thread không nên ghi vào các biến nằm trên cùng cache line).</p>
<h3 id="memory-leaks-va-tools">Memory Leaks và Tools<a class="zola-anchor" href="#memory-leaks-va-tools" aria-label="Anchor link for: memory-leaks-va-tools" style="visibility: hidden;"></a></h3>
<p>Memory leak xảy ra khi chương trình cấp phát bộ nhớ nhưng không giải phóng khi không còn sử dụng. Lâu dài, điều này làm cạn kiệt bộ nhớ khả dụng.</p>
<p>Có nhiều công cụ để phát hiện memory leak như Valgrind, AddressSanitizer, Visual Studio Memory Profiler, hoặc các tools tích hợp trong IDE. Ngoài ra, việc sử dụng smart pointers trong C++ (như unique_ptr, shared_ptr) hoặc RAII pattern giúp quản lý bộ nhớ tự động và giảm nguy cơ leak.</p>
<h2 id="bao-mat-bo-nho">Bảo mật bộ nhớ<a class="zola-anchor" href="#bao-mat-bo-nho" aria-label="Anchor link for: bao-mat-bo-nho" style="visibility: hidden;"></a></h2>
<h3 id="buffer-overflow">Buffer Overflow<a class="zola-anchor" href="#buffer-overflow" aria-label="Anchor link for: buffer-overflow" style="visibility: hidden;"></a></h3>
<p>Buffer overflow là lỗ hổng bảo mật xảy ra khi chương trình ghi dữ liệu vượt quá giới hạn của buffer, ghi đè lên các vùng nhớ khác. Kẻ tấn công có thể lợi dụng điều này để thực thi mã độc hoặc thay đổi luồng thực thi của chương trình.</p>
<p>Để phòng chống, có thể sử dụng các kỹ thuật như stack canaries (đặt giá trị đặc biệt trước return address để phát hiện ghi đè), ASLR (Address Space Layout Randomization - ngẫu nhiên hóa địa chỉ bộ nhớ), DEP/NX (Data Execution Prevention - ngăn thực thi code từ vùng dữ liệu), và bounds checking trong runtime.</p>
<h3 id="use-after-free">Use-After-Free<a class="zola-anchor" href="#use-after-free" aria-label="Anchor link for: use-after-free" style="visibility: hidden;"></a></h3>
<p>Use-after-free xảy ra khi chương trình truy cập bộ nhớ đã được giải phóng. Vùng nhớ này có thể đã được cấp phát lại cho mục đích khác, dẫn đến hành vi không xác định hoặc lỗ hổng bảo mật.</p>
<p>Các biện pháp phòng chống bao gồm: set pointer thành NULL sau khi free, sử dụng smart pointers hoặc reference counting, và các công cụ như AddressSanitizer để phát hiện trong quá trình phát triển.</p>
<h3 id="memory-protection">Memory Protection<a class="zola-anchor" href="#memory-protection" aria-label="Anchor link for: memory-protection" style="visibility: hidden;"></a></h3>
<p>Hệ điều hành hiện đại cung cấp nhiều cơ chế bảo vệ bộ nhớ. Mỗi page có các permission bits (read, write, execute), và truy cập vi phạm sẽ gây ra exception. Kernel space và user space được tách biệt, user process không thể truy cập trực tiếp vào kernel memory.</p>
<p>Control Flow Integrity (CFI) và Control Flow Guard (CFG) là các kỹ thuật bảo vệ khỏi các cuộc tấn công redirect luồng thực thi như ROP (Return-Oriented Programming).</p>
<h2 id="ket-luan">Kết luận<a class="zola-anchor" href="#ket-luan" aria-label="Anchor link for: ket-luan" style="visibility: hidden;"></a></h2>
<p>Hiểu rõ về các vùng nhớ của máy tính và chương trình là kiến thức nền tảng quan trọng cho mọi lập trình viên. Từ phân cấp bộ nhớ phần cứng với registers, cache, RAM, và storage, đến các vùng nhớ logic như text segment, data segment, heap, và stack, mỗi thành phần đều có vai trò và đặc điểm riêng.</p>
<p>Việc nắm vững kiến thức này giúp bạn viết code hiệu quả hơn, tránh các lỗi phổ biến như memory leak, buffer overflow, và tối ưu hóa hiệu suất thông qua cache optimization. Đồng thời, nó cũng là nền tảng để hiểu sâu hơn về cách hệ điều hành hoạt động, cách debugging, và cách bảo mật ứng dụng.</p>
<p>Trong thời đại mà nhiều ngôn ngữ lập trình cung cấp garbage collection và abstraction cao, việc hiểu về bộ nhớ ở mức thấp vẫn có giá trị to lớn, giúp bạn trở thành một developer toàn diện và có khả năng giải quyết các vấn đề phức tạp.</p>

      </article>

      
      

      
      
    </div>

    


<footer>
  <div class="left">
    <div class="copyright">
      © 2025 <a href="https:&#x2F;&#x2F;wen.is-a.dev">Quoc Anh</a>
      
    </div>
  </div>

  <div class="right">
    
    
    
    

    <!-- 
    
    
    <button id="theme-toggle" aria-label="theme switch">
      <span class="moon-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M10 7C10 10.866 13.134 14 17 14C18.9584 14 20.729 13.1957 21.9995 11.8995C22 11.933 22 11.9665 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C12.0335 2 12.067 2 12.1005 2.00049C10.8043 3.27098 10 5.04157 10 7ZM4 12C4 16.4183 7.58172 20 12 20C15.0583 20 17.7158 18.2839 19.062 15.7621C18.3945 15.9187 17.7035 16 17 16C12.0294 16 8 11.9706 8 7C8 6.29648 8.08133 5.60547 8.2379 4.938C5.71611 6.28423 4 8.9417 4 12Z" fill="currentColor"></path></svg>
</span>
      <span class="sun-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"><path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18ZM12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.51472 4.92893L4.92893 3.51472L7.05025 5.63604L5.63604 7.05025L3.51472 4.92893ZM16.9497 18.364L18.364 16.9497L20.4853 19.0711L19.0711 20.4853L16.9497 18.364ZM19.0711 3.51472L20.4853 4.92893L18.364 7.05025L16.9497 5.63604L19.0711 3.51472ZM5.63604 16.9497L7.05025 18.364L4.92893 20.4853L3.51472 19.0711L5.63604 16.9497ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z" fill="currentColor"></path></svg>
</span>
    </button>
     -->
  </div>
</footer>




  </main>
</div>

  
<script src="/js/lightense.min.js"></script>



  <script src="https://wen.is-a.dev/js/main.js"></script>
</body>

</html>